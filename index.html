<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jaguar Analityka</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f7fa;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #003366;
      color: white;
      padding: 20px;
      text-align: center;
      font-size: 1.5em;
      font-weight: bold;
    }
    main {
      max-width: 1200px;
      margin: auto;
      padding: 20px;
      background: white;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    section {
      margin-bottom: 50px;
    }
    label {
      display: block;
      margin-top: 10px;
    }
    input, select, textarea {
      width: 100%;
      padding: 8px;
      margin-top: 4px;
      box-sizing: border-box;
    }
    button {
      margin-top: 15px;
      background-color: #003366;
      color: white;
      border: none;
      padding: 10px 20px;
      cursor: pointer;
    }
    button:hover {
      background-color: #0055aa;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    table, th, td {
      border: 1px solid #ccc;
    }
    th, td {
      padding: 10px;
      text-align: left;
    }
    th {
      background-color: #003366;
      color: white;
    }
  </style>
</head>
<body>
  <header>Jaguar Analityka - Pełna Wersja</header>
  <main>
    <!-- Drużyny -->
    <section>
      <h2>Drużyny</h2>
      <form id="teamForm">
        <label>Nazwa drużyny:</label>
        <input type="text" id="teamName" required />
        <button type="submit">Dodaj drużynę</button>
      </form>
      <table id="teamsTable">
        <thead><tr><th>Drużyna</th><th>Akcje</th></tr></thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- Zawodnicy -->
    <section>
      <h2>Zawodnicy</h2>
      <form id="playerForm">
        <label>Imię i nazwisko:</label>
        <input type="text" id="playerName" required />
        <label>Numer na koszulce:</label>
        <input type="number" id="playerNumber" required />
        <label>Pozycja:</label>
        <input type="text" id="playerPosition" required />
        <label>Rocznik:</label>
        <input type="number" id="playerBirthYear" required />
        <label>Drużyna:</label>
        <select id="playerTeam" required></select>
        <button type="submit">Dodaj zawodnika</button>
      </form>
      <table id="playersTable">
        <thead><tr><th>Zawodnik</th><th>Nr</th><th>Pozycja</th><th>Rocznik</th><th>Drużyna</th><th>Akcje</th></tr></thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- Mecze -->
    <section>
      <h2>Mecze</h2>
      <form id="matchForm">
        <label>Data meczu:</label>
        <input type="date" id="matchDate" required />
        <label>Drużyna przeciwnika:</label>
        <input type="text" id="opponentTeam" required />
        <label>Wynik (Jaguar - Przeciwnik):</label>
        <input type="text" id="matchScore" required />
        <label>Strzelcy bramek:</label>
        <input type="text" id="scorers" placeholder="np. Kowalski x2, Nowak" />
        <label>Asysty:</label>
        <input type="text" id="assists" placeholder="np. Malinowski x2, Kwiatkowski" />
        <label>Czas gry zawodników (w minutach, np. 60-Kowalski,30-Nowak):</label>
        <input type="text" id="playerMinutes" />
        <label>Top 3 zawodników Jaguara:</label>
        <input type="text" id="topJaguar" placeholder="np. Kowalski, Nowak, Malinowski" />
        <label>Top 3 zawodników przeciwnika:</label>
        <input type="text" id="topOpponent" placeholder="np. Zieliński, Lewandowski, Górski" />
        <label>Ocena meczu:</label>
        <input type="number" min="1" max="10" id="matchRating" />
        <label>Komentarz trenera:</label>
        <textarea id="matchComment"></textarea>
        <button type="submit">Zapisz mecz</button>
      </form>
      <table id="matchesTable">
        <thead><tr><th>Data</th><th>Przeciwnik</th><th>Wynik</th><th>Akcje</th></tr></thead>
        <tbody></tbody>
      </table>
    </section>
  </main>

  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <script>
   const firebaseConfig = {
    apiKey: "AIzaSyAWXiBO5-woCCEqCBc2rfOIo1RhUUtevzU",
    authDomain: "jaguar-analityka.firebaseapp.com",
    databaseURL: "https://jaguar-analityka-default-rtdb.firebaseio.com",
    projectId: "jaguar-analityka",
    storageBucket: "jaguar-analityka.appspot.com",
    messagingSenderId: "797947184851",
    appId: "1:797947184851:web:0cc25ca0dd8b178f418c26",
  };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // DRUŻYNY
    const teamForm = document.getElementById('teamForm');
    teamForm.addEventListener('submit', e => {
      e.preventDefault();
      const name = document.getElementById('teamName').value;
      const id = db.ref('teams').push().key;
      db.ref('teams/' + id).set({ name });
      teamForm.reset();
    });
    db.ref('teams').on('value', snapshot => {
      const table = document.querySelector('#teamsTable tbody');
      const select = document.getElementById('playerTeam');
      table.innerHTML = '';
      select.innerHTML = '';
      snapshot.forEach(teamSnap => {
        const team = teamSnap.val();
        const row = `<tr><td>${team.name}</td><td><button onclick="deleteTeam('${teamSnap.key}')">Usuń</button></td></tr>`;
        table.innerHTML += row;
        select.innerHTML += `<option value="${team.name}">${team.name}</option>`;
      });
    });
    function deleteTeam(id) {
      db.ref('teams/' + id).remove();
    }

    // ZAWODNICY
    const playerForm = document.getElementById('playerForm');
    playerForm.addEventListener('submit', e => {
      e.preventDefault();
      const name = document.getElementById('playerName').value;
      const number = document.getElementById('playerNumber').value;
      const position = document.getElementById('playerPosition').value;
      const birthYear = document.getElementById('playerBirthYear').value;
      const team = document.getElementById('playerTeam').value;
      const id = db.ref('players').push().key;
      db.ref('players/' + id).set({ name, number, position, birthYear, team });
      playerForm.reset();
    });
    db.ref('players').on('value', snapshot => {
      const table = document.querySelector('#playersTable tbody');
      table.innerHTML = '';
      snapshot.forEach(pSnap => {
        const p = pSnap.val();
        table.innerHTML += `<tr><td>${p.name}</td><td>${p.number}</td><td>${p.position}</td><td>${p.birthYear}</td><td>${p.team}</td><td><button onclick="deletePlayer('${pSnap.key}')">Usuń</button></td></tr>`;
      });
    });
    function deletePlayer(id) {
      db.ref('players/' + id).remove();
    }

    // MECZE
    const matchForm = document.getElementById('matchForm');
    matchForm.addEventListener('submit', e => {
      e.preventDefault();
      const match = {
        date: document.getElementById('matchDate').value,
        opponent: document.getElementById('opponentTeam').value,
        score: document.getElementById('matchScore').value,
        scorers: document.getElementById('scorers').value,
        assists: document.getElementById('assists').value,
        minutes: document.getElementById('playerMinutes').value,
        topJaguar: document.getElementById('topJaguar').value,
        topOpponent: document.getElementById('topOpponent').value,
        rating: document.getElementById('matchRating').value,
        comment: document.getElementById('matchComment').value
      };
      const id = db.ref('matches').push().key;
      db.ref('matches/' + id).set(match);
      matchForm.reset();
    });
    db.ref('matches').on('value', snapshot => {
      const table = document.querySelector('#matchesTable tbody');
      table.innerHTML = '';
      snapshot.forEach(matchSnap => {
        const m = matchSnap.val();
        table.innerHTML += `<tr><td>${m.date}</td><td>${m.opponent}</td><td>${m.score}</td><td><button onclick="deleteMatch('${matchSnap.key}')">Usuń</button></td></tr>`;
      });
    });
    function deleteMatch(id) {
      db.ref('matches/' + id).remove();
    }
  </script>
</body>
</html>
